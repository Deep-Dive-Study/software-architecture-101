# Chapter 07 아키텍처 특성 범위
- 전통적으로는 아키텍처 특성의 범위를 시스템 레벨에 두는 것을 당연시 했음
- 현대적인 공학 기술의 등장과 마이크로서비스 등의 아키텍처 스타일이 가능하면서 아키텍처 특성의 범위는 상당이 좁혀졌음
- 기존에 당연하게 여겼던 공식도 서서히 퇴물로 전락하고 있음

- 아키텍처 스타일의 구조적인 진화 가능성을 측정할 기술이 필요했음
  - 기존의 측정 기술로는 상세한 수준까지 측정 불가능
    - 코드에 관한 저수준의 세부만 밝힘
    - 아키텍처 특성에 영향을 미치는, 코드베이스 외부의 의존성을 지닌 컴포넌트는 평가할 수 없었음

- 아키텍트는 아키텍처 특성에 영향을 미치는 코드베이스 외부의 컴포넌트를 잘 살펴봐야 함
  - 아키텍처 퀀텀이라는 용어를 정의
  - 아키텍처 퀀텀의 의미를 이해하려면 먼저 커네이선스 핵심 메트릭을 잘 알아두어야 함

## 7.1 커플링과 커네이선스
- 구심/원심 커플링 같은 코드 레벨의 커플링 메트릭은 아키텍처 분석용으로는 너무 세분도가 높음

#### 커네이선스
- 두 컴포넌트 중 한쪽이 변경될 경우 다른 쪽도 변경해야 전체 시스템의 정합성이 맞는다면 이들은 커네이선스를 갖고 있는 것

- 커네이선스
  - 정적 코드 분석으로 발견할 수 있는 정적 커네이선스
  - 런타임 동작에 관한 동적 커네이선스

- 아키텍처 퀀텀을 정의하려면 컴포넌트가 어떻게 서로 연결되어 있는지 측정할 방법이 필요한데, 이게 커네이선스라는 개념
  - 마이크로 서비스 아키텍처의 두 서비스가 address라는 동일한 클래스를 공유한다면 두 서비스는 서로 정적인 커네이선스를 가지는 것
  - address 변경 시, 두 서비스 모두 변경

- 동적 커네이선스는 동기, 비동기 두 종류가 있음
  - 분산 서비스끼리 동기 호출을 하면 호출부는 피호출부의 응답을 기다려야 함
  - 비동기 호출은 파이어 앤드 포겟 방식이므로 개별적으로 작동시킬 수 있음

## 7.2 아키텍처 퀀텀과 세분도
- 소프트웨어를 서로 엮는 것은 컴포넌트 레벨의 커플링만이 아님
- 많은 비즈니스 개념이 의미상 여러 시스템 파트를 한데 엮어 기능적으로 응집되어 있음
- 성공적으로 소프트웨어를 설계, 분석, 발전시키기 위해 개발자는 문제가 될만한 커플링 지점을 모두 살펴봐야 함
- 퀀텀(양자)은 상호작용을 하는 모든 물리 입자 가운데 가장 작은 양

#### 아키텍처 퀀텀
- 높은 기능 응집도와 동기적 커네이선스를 가진, 독립적으로 배포 가능한 아티팩트
- 아래의 개념들이 담겨 있음

#### 독립적으로 배포 가능
- 아키텍처 퀀텀은 아키텍처의 다른 파트와 독립적으로 작동되는 모든 필수 컴포넌트를 포함
  - 데이터베이스를 사용하는 애플리케이션은 데이터베이스 없이는 작동되지 않으므로 퀀텀의 일부임

#### 높은 기능 응집도
- 응집도는 컴포넌트 설계에 따라 구현된 코드가 얼마나 목적에 맞게 통합되어 있는지를 나타냄
  - Customer 클래스 : 고객 엔티티와 관련된 모든 프로퍼티와 메서드를 가지고 있으므로 응집도가 높음
  - Utility : 여러 가지 잡다하느 메서드를 무작위로 섞어 놓아서 응집도가 낮음

- 기능 응집도가 높다는 건 아키텍처 퀀텀이 목적에 맞는 뭔가를 하고 있다는 뜻
  - 단일 데이터베이스를 사용하는 기존 모놀리식 애플리케이션에서 이런 구분이 별로 의미가 없음
  - 마이크로서비스 아키텍처는 보통 개발자가 각 서비스를 하나의 워크플로에 맞게 설계하므로 기능 응집도가 높게 나타남

#### 동기적 커네이선스
- 아키텍처 퀀텀을 형성하는 애플리케이션 몬텍스트 내부 또는 분산 서비스 간의 동기 호출을 의미
  - 마이크로서비스 아키텍처에서 어떤 서비스가 다른 서비를 동기 호출할 때, 운영 아키텍처 특성 측면에서 두 서비스는 두드러진 차이를 나타낼 수 없음
  - 호출부가 피호출부보다 확장성이 훨씬 좋다면 타임아웃과 여타 신뢰성 문제가 발생함
  - 동기 호출은 호출의 길이에 대해 동적 커네이선스를 만들어냄
  - 한쪽이 다른 쪽을 기다린다면 호출하는 도중에는 양쪽의 운영 아키텍처 특성이 동일해야 함


#### 전통적인 커플링 메트릭과 커네이선스 간의 관계 + 통신 커네이선스
  
<img width="549" height="309" alt="CleanShot 2025-09-07 at 17 36 49" src="https://github.com/user-attachments/assets/75a0256b-17fe-4000-b386-879eca238e8b" />


- 아키텍처 퀀텀 개념은 아키텍처 특성의 새로운 범위를 제시함
- 현대 시스템에서 아키텍트는 시스템 레벨보다는 퀀텀 레벨의 아키텍처 특성을 정의함
